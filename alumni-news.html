<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MBSTU Physics Alumni Association - Alumni News</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
    body { font-family: 'Inter', sans-serif; }
    .nav-container {
        -webkit-overflow-scrolling: touch;
        scrollbar-width: none;
    }
    .nav-container::-webkit-scrollbar { display: none; }
    
    /* Loading spinner */
    .loading-spinner {
        border: 4px solid #f3f4f6;
        border-top: 4px solid #7c3aed;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
        margin: 20px auto;
    }
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
    
    /* Gradient buttons */
    .gradient-btn-blue {
        background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
        color: white;
        transition: all 0.3s ease;
    }
    .gradient-btn-blue:hover {
        background: linear-gradient(135deg, #2563eb 0%, #1e40af 100%);
        transform: translateY(-2px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
    }
    
    /* News-specific styles */
    .news-card {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    .news-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }
    
    .news-date {
        background: linear-gradient(135deg, #7c3aed 0%, #4f46e5 100%);
        color: white;
        border-radius: 0.5rem;
        padding: 0.5rem 1rem;
        text-align: center;
        min-width: 80px;
    }
    
    .news-category {
        display: inline-block;
        padding: 0.25rem 0.75rem;
        border-radius: 9999px;
        font-size: 0.75rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.05em;
    }
    
    .category-achievement { background-color: #dcfce7; color: #166534; }
    .category-event { background-color: #dbeafe; color: #1e40af; }
    .category-update { background-color: #fef3c7; color: #92400e; }
    .category-announcement { background-color: #fce7f3; color: #be185d; }
    .category-general { background-color: #e0e7ff; color: #3730a3; }
    
    .news-ribbon {
        position: absolute;
        top: 10px;
        right: -30px;
        background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        color: white;
        padding: 5px 30px;
        transform: rotate(45deg);
        font-size: 0.75rem;
        font-weight: bold;
        box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
</style>
</head>
<body class="bg-gray-100 text-gray-800">

<!-- Header and Navigation -->
<div class="bg-white shadow-md">
    <div class="header text-center py-4 bg-gradient-to-r from-blue-700 via-indigo-800 to-purple-900 text-white">
        <div class="max-w-7xl mx-auto px-4 flex flex-col sm:flex-row items-center justify-center sm:justify-between">
            <!-- Logo and Title Container -->
            <div class="flex items-center space-x-4 mb-4 sm:mb-0">
                <!-- Logo Container -->
                <div class="logo-container w-24 h-24 bg-white rounded-full p-1 shadow-lg flex items-center justify-center">
                    <img src="assets/logo.png" alt="MBSTU Physics Alumni Association Logo" 
                         class="w-full h-full object-contain"
                         onerror="this.style.display='none'; document.querySelector('.logo-placeholder').style.display='flex';">
                    <!-- Fallback placeholder if logo doesn't load -->
                    <div class="logo-placeholder w-full h-full bg-gradient-to-br from-purple-500 to-blue-600 rounded-full flex items-center justify-center text-white font-bold text-lg hidden">
                        MPAA
                    </div>
                </div>
                
                <!-- Title Container -->
                <div class="text-left">
                    <div class="main-title text-2xl sm:text-3xl lg:text-4xl font-extrabold tracking-tight leading-tight">
                        MBSTU PHYSICS ALUMNI ASSOCIATION
                    </div>
                    <div class="university-name text-sm sm:text-base lg:text-lg font-semibold mt-1 opacity-90">
                        MAWLANA BHASHANI SCIENCE AND TECHNOLOGY UNIVERSITY
                    </div>
                </div>
            </div>
        </div>
    </div>
    <nav class="nav bg-white shadow-sm sticky top-0 z-50">
        <div class="nav-container max-w-7xl mx-auto flex justify-start items-center space-x-2 sm:space-x-4 p-4 overflow-x-auto whitespace-nowrap">
            <a href="index.html" class="nav-tab text-gray-600 hover:text-purple-600 transition duration-300 px-3 py-2 rounded-md text-sm sm:text-base font-medium">Home</a>
            <a href="membership-form.html" class="nav-tab text-gray-600 hover:text-purple-600 transition duration-300 px-3 py-2 rounded-md text-sm sm:text-base font-medium">Become a Member</a>
            <a href="members.html" class="nav-tab text-gray-600 hover:text-purple-600 transition duration-300 px-3 py-2 rounded-md text-sm sm:text-base font-medium">Current Members</a>
            <a href="committee.html" class="nav-tab text-gray-600 hover:text-purple-600 transition duration-300 px-3 py-2 rounded-md text-sm sm:text-base font-medium">Committee</a>
            <a href="alumni-news.html" class="nav-tab text-purple-600 font-bold border-b-2 border-purple-600 px-3 py-2 rounded-md text-sm sm:text-base">Alumni News</a>
            <a href="activities.html" class="nav-tab text-gray-600 hover:text-purple-600 transition duration-300 px-3 py-2 rounded-md text-sm sm:text-base font-medium">Activities</a>
            <a href="upcoming-events.html" class="nav-tab text-gray-600 hover:text-purple-600 transition duration-300 px-3 py-2 rounded-md text-sm sm:text-base font-medium">Upcoming Events</a>
            <a href="admin.html" class="nav-tab text-gray-600 hover:text-purple-600 transition duration-300 px-3 py-2 rounded-md text-sm sm:text-base font-medium">Admin</a>
        </div>
    </nav>
</div>

<!-- Main Content -->
<div class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8 space-y-8">
    <h1 class="text-3xl font-bold text-purple-800 mb-8 text-center">Alumni News</h1>
    
    <!-- News Filter -->
    <div class="bg-white rounded-lg shadow p-4 mb-6">
        <div class="flex flex-wrap gap-4 justify-center">
            <button id="filter-all" class="filter-btn gradient-btn-blue px-4 py-2 rounded-lg font-medium" data-filter="all">All News</button>
            <button id="filter-achievement" class="filter-btn bg-gray-200 hover:bg-gray-300 px-4 py-2 rounded-lg font-medium transition-colors" data-filter="achievement">Achievements</button>
            <button id="filter-event" class="filter-btn bg-gray-200 hover:bg-gray-300 px-4 py-2 rounded-lg font-medium transition-colors" data-filter="event">Events</button>
            <button id="filter-update" class="filter-btn bg-gray-200 hover:bg-gray-300 px-4 py-2 rounded-lg font-medium transition-colors" data-filter="update">Updates</button>
            <button id="filter-announcement" class="filter-btn bg-gray-200 hover:bg-gray-300 px-4 py-2 rounded-lg font-medium transition-colors" data-filter="announcement">Announcements</button>
        </div>
    </div>
    
    <!-- Loading Spinner -->
    <div id="loading-spinner" class="loading-spinner"></div>
    
    <div id="content-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <!-- News items will be dynamically inserted here -->
    </div>
    
    <div id="no-content-message" class="hidden">
        <div class="text-center py-12">
            <i class="fas fa-newspaper text-6xl text-gray-300 mb-4"></i>
            <p class="text-gray-500 text-lg">No news articles found at the moment.</p>
            <p class="text-gray-400 mt-2">Check back later for updates!</p>
        </div>
    </div>
</div>

<!-- Footer -->
<footer class="bg-gradient-to-r from-blue-700 via-indigo-800 to-purple-900 text-white text-center p-6 mt-8">
    <p class="font-semibold">&copy; 2024 MBSTU PHYSICS ALUMNI ASSOCIATION. All Rights Reserved.</p>
</footer>

<script>
document.addEventListener('DOMContentLoaded', function () {
    const contentContainer = document.getElementById('content-container');
    const noContentMessage = document.getElementById('no-content-message');
    const loadingSpinner = document.getElementById('loading-spinner');
    const filterButtons = document.querySelectorAll('.filter-btn');

    // Function to load news from news.txt file
    async function loadNewsFromFile() {
        try {
            loadingSpinner.classList.remove('hidden');
            const response = await fetch('assets/news.txt');
            
            if (!response.ok) {
                throw new Error('Failed to load news');
            }
            
            const text = await response.text();
            const newsItems = parseNewsText(text);
            renderNews(newsItems);
            
            // Set up filter buttons
            setupFilterButtons(newsItems);
            
        } catch (error) {
            console.error('Error loading news:', error);
            noContentMessage.classList.remove('hidden');
            loadingSpinner.classList.add('hidden');
        }
    }

    // Parse the news.txt file content
    function parseNewsText(text) {
        const newsItems = [];
        const sections = text.split('---').filter(section => section.trim());
        
        sections.forEach((section, index) {
            const lines = section.split('\n').filter(line => line.trim());
            const newsItem = { id: index + 1 };
            
            lines.forEach(line => {
                const [key, ...valueParts] = line.split(':');
                const value = valueParts.join(':').trim();
                
                if (key.toLowerCase().trim() === 'title') {
                    newsItem.title = value;
                } else if (key.toLowerCase().trim() === 'description') {
                    newsItem.description = value;
                } else if (key.toLowerCase().trim() === 'date') {
                    newsItem.date = value;
                } else if (key.toLowerCase().trim() === 'category') {
                    newsItem.category = value.toLowerCase();
                } else if (key.toLowerCase().trim() === 'photo') {
                    newsItem.imageUrl = `assets/images/${value}`;
                } else if (key.toLowerCase().trim() === 'featured') {
                    newsItem.featured = value.toLowerCase() === 'true';
                }
            });
            
            if (newsItem.title && newsItem.description) {
                newsItems.push(newsItem);
            }
        });
        
        return newsItems;
    }

    // Get category class for styling
    function getCategoryClass(category) {
        const categoryMap = {
            'achievement': 'category-achievement',
            'event': 'category-event',
            'update': 'category-update',
            'announcement': 'category-announcement',
            'general': 'category-general'
        };
        return categoryMap[category] || 'category-general';
    }

    // Format date for display
    function formatDate(dateString) {
        if (!dateString) return '';
        
        try {
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            return new Date(dateString).toLocaleDateString('en-US', options);
        } catch (e) {
            return dateString;
        }
    }

    // Render news to the page
    function renderNews(newsItems, filter = 'all') {
        contentContainer.innerHTML = '';
        loadingSpinner.classList.add('hidden');
        
        let filteredNews = newsItems;
        
        if (filter !== 'all') {
            filteredNews = newsItems.filter(news => news.category === filter);
        }
        
        if (filteredNews.length === 0) {
            noContentMessage.classList.remove('hidden');
        } else {
            noContentMessage.classList.add('hidden');
            filteredNews.forEach(news => {
                const newsCard = `
                    <div class="news-card bg-white rounded-lg shadow-lg overflow-hidden relative">
                        ${news.featured ? '<div class="news-ribbon">FEATURED</div>' : ''}
                        ${news.imageUrl ? `
                            <div class="w-full h-48 overflow-hidden bg-gray-100 flex items-center justify-center">
                                <img src="${news.imageUrl}" alt="${news.title}" 
                                     class="max-w-full max-h-full object-cover"
                                     onerror="this.style.display='none'; this.parentElement.innerHTML='<div class=\\'text-gray-400 text-5xl\\'><i class=\\'fas fa-newspaper\\'></i></div>';">
                            </div>
                        ` : `
                            <div class="w-full h-48 bg-gray-100 flex items-center justify-center">
                                <div class="text-gray-400 text-5xl">
                                    <i class="fas fa-newspaper"></i>
                                </div>
                            </div>
                        `}
                        <div class="p-6">
                            <div class="flex justify-between items-start mb-4">
                                <h3 class="text-xl font-bold text-gray-800 flex-1">${news.title}</h3>
                                ${news.date ? `
                                <div class="news-date ml-4">
                                    <div class="text-sm font-semibold">${new Date(news.date).toLocaleDateString('en-US', { month: 'short' })}</div>
                                    <div class="text-lg font-bold">${new Date(news.date).getDate()}</div>
                                    <div class="text-xs">${new Date(news.date).getFullYear()}</div>
                                </div>
                                ` : ''}
                            </div>
                            ${news.category ? `
                            <div class="mb-3">
                                <span class="news-category ${getCategoryClass(news.category)}">${news.category}</span>
                            </div>
                            ` : ''}
                            <p class="text-gray-600 mb-4 line-clamp-3">${news.description}</p>
                            <div class="flex justify-between items-center">
                                ${news.date ? `
                                <span class="text-sm text-gray-500">${formatDate(news.date)}</span>
                                ` : '<span></span>'}
                                <button class="gradient-btn-blue px-4 py-2 rounded-lg text-sm font-medium">
                                    Read More
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                contentContainer.innerHTML += newsCard;
            });
        }
    }

    // Set up filter buttons functionality
    function setupFilterButtons(newsItems) {
        filterButtons.forEach(button => {
            button.addEventListener('click', function() {
                // Update active button styling
                filterButtons.forEach(btn => {
                    btn.classList.remove('gradient-btn-blue');
                    btn.classList.add('bg-gray-200', 'hover:bg-gray-300');
                });
                
                this.classList.remove('bg-gray-200', 'hover:bg-gray-300');
                this.classList.add('gradient-btn-blue');
                
                // Filter news
                renderNews(newsItems, this.dataset.filter);
            });
        });
    }

    // Initialize the page
    loadNewsFromFile();
});
</script>

</body>
</html>
